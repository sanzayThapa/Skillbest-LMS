{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 121, "column": 0}, "map": {"version":3,"sources":["file:///home/sanjay/Documents/Working/Coding/Skillbest%20LMS/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\n\nconst globalForPrisma = global as unknown as { prisma: PrismaClient }\n\nexport const prisma = globalForPrisma.prisma || new PrismaClient()\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AAEC,MAAM,SAAS,gBAAgB,MAAM,IAAI,IAAI,6IAAY;AAEhE,wCAA2C,gBAAgB,MAAM,GAAG","debugId":null}},
    {"offset": {"line": 134, "column": 0}, "map": {"version":3,"sources":["file:///home/sanjay/Documents/Working/Coding/Skillbest%20LMS/src/app/api/auth/%5B...nextauth%5D/route.ts"],"sourcesContent":["import NextAuth from \"next-auth\"\nimport GoogleProvider from \"next-auth/providers/google\"\nimport CredentialsProvider from \"next-auth/providers/credentials\";\nimport bcrypt from \"bcryptjs\";\nimport { PrismaAdapter } from \"@next-auth/prisma-adapter\"\nimport { prisma } from \"@/lib/prisma\"\n\nimport { AuthOptions } from \"next-auth\";\n\nexport const authOptions: AuthOptions = {\n    adapter: PrismaAdapter(prisma),\n    providers: [\n        CredentialsProvider({\n            name: \"Credentials\",\n            credentials: {\n                email: { label: \"Email\", type: \"text\" },\n                password: { label: \"Password\", type: \"password\" }\n            },\n            async authorize(credentials) {\n                if (!credentials?.email || !credentials?.password) {\n                    throw new Error('Invalid credentials');\n                }\n\n                const user = await prisma.user.findUnique({\n                    where: { email: credentials.email }\n                });\n\n                if (!user || !user.password) {\n                    throw new Error('Invalid credentials');\n                }\n\n                const isValid = await bcrypt.compare(credentials.password, user.password);\n\n                if (!isValid) {\n                    throw new Error('Invalid credentials');\n                }\n\n                return user;\n            }\n        }),\n    ],\n    session: {\n        strategy: \"jwt\",\n    },\n    callbacks: {\n        async jwt({ token, user }: any) {\n            if (user) {\n                token.role = user.role;\n            }\n            return token;\n        },\n        async session({ session, token }: any) {\n            if (session.user) {\n                (session.user as any).role = token.role;\n            }\n            return session;\n        }\n    }\n};\n\nconst handler = NextAuth(authOptions);\n\nexport { handler as GET, handler as POST }\n"],"names":[],"mappings":";;;;;;;;AAAA;AAEA;AACA;AACA;AACA;;;;;;AAIO,MAAM,cAA2B;IACpC,SAAS,IAAA,uLAAa,EAAC,gIAAM;IAC7B,WAAW;QACP,IAAA,qKAAmB,EAAC;YAChB,MAAM;YACN,aAAa;gBACT,OAAO;oBAAE,OAAO;oBAAS,MAAM;gBAAO;gBACtC,UAAU;oBAAE,OAAO;oBAAY,MAAM;gBAAW;YACpD;YACA,MAAM,WAAU,WAAW;gBACvB,IAAI,CAAC,aAAa,SAAS,CAAC,aAAa,UAAU;oBAC/C,MAAM,IAAI,MAAM;gBACpB;gBAEA,MAAM,OAAO,MAAM,gIAAM,CAAC,IAAI,CAAC,UAAU,CAAC;oBACtC,OAAO;wBAAE,OAAO,YAAY,KAAK;oBAAC;gBACtC;gBAEA,IAAI,CAAC,QAAQ,CAAC,KAAK,QAAQ,EAAE;oBACzB,MAAM,IAAI,MAAM;gBACpB;gBAEA,MAAM,UAAU,MAAM,8IAAM,CAAC,OAAO,CAAC,YAAY,QAAQ,EAAE,KAAK,QAAQ;gBAExE,IAAI,CAAC,SAAS;oBACV,MAAM,IAAI,MAAM;gBACpB;gBAEA,OAAO;YACX;QACJ;KACH;IACD,SAAS;QACL,UAAU;IACd;IACA,WAAW;QACP,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAO;YAC1B,IAAI,MAAM;gBACN,MAAM,IAAI,GAAG,KAAK,IAAI;YAC1B;YACA,OAAO;QACX;QACA,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAO;YACjC,IAAI,QAAQ,IAAI,EAAE;gBACb,QAAQ,IAAI,CAAS,IAAI,GAAG,MAAM,IAAI;YAC3C;YACA,OAAO;QACX;IACJ;AACJ;AAEA,MAAM,UAAU,IAAA,kJAAQ,EAAC","debugId":null}},
    {"offset": {"line": 211, "column": 0}, "map": {"version":3,"sources":["file:///home/sanjay/Documents/Working/Coding/Skillbest%20LMS/src/app/api/user-profile/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { getServerSession } from \"next-auth/next\";\nimport { prisma } from \"@/lib/prisma\";\nimport { authOptions } from \"@/app/api/auth/[...nextauth]/route\";\n\nexport async function GET(req: Request) {\n    try {\n        const session = await getServerSession(authOptions);\n\n        if (!session?.user?.email) {\n            return new NextResponse(\"Unauthorized\", { status: 401 });\n        }\n\n        const user = await prisma.user.findUnique({\n            where: { email: session.user.email },\n        });\n\n        return NextResponse.json(user);\n    } catch (error) {\n        console.error(\"[PROFILE_GET]\", error);\n        return new NextResponse(\"Internal Error\", { status: 500 });\n    }\n}\n\nexport async function PATCH(req: Request) {\n    try {\n        const session = await getServerSession(authOptions);\n        const body = await req.json();\n        const {\n            name,\n            phone,\n            bio,\n            headline,\n            gender,\n            dateOfBirth,\n            website,\n            twitter,\n            facebook,\n            linkedin,\n            youtube\n        } = body;\n\n        if (!session?.user?.email) {\n            return new NextResponse(\"Unauthorized\", { status: 401 });\n        }\n\n        const updatedUser = await prisma.user.update({\n            where: { email: session.user.email },\n            data: {\n                name,\n                phone,\n                bio,\n                headline,\n                gender,\n                dateOfBirth: dateOfBirth ? new Date(dateOfBirth) : null,\n                website,\n                twitter,\n                facebook,\n                linkedin,\n                youtube\n            },\n        });\n\n        return NextResponse.json(updatedUser);\n    } catch (error) {\n        console.error(\"[PROFILE_UPDATE]\", error);\n        return new NextResponse(\"Internal Error\", { status: 500 });\n    }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;AACA;;;;;AAEO,eAAe,IAAI,GAAY;IAClC,IAAI;QACA,MAAM,UAAU,MAAM,IAAA,mKAAgB,EAAC,yKAAW;QAElD,IAAI,CAAC,SAAS,MAAM,OAAO;YACvB,OAAO,IAAI,gJAAY,CAAC,gBAAgB;gBAAE,QAAQ;YAAI;QAC1D;QAEA,MAAM,OAAO,MAAM,gIAAM,CAAC,IAAI,CAAC,UAAU,CAAC;YACtC,OAAO;gBAAE,OAAO,QAAQ,IAAI,CAAC,KAAK;YAAC;QACvC;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC7B,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,iBAAiB;QAC/B,OAAO,IAAI,gJAAY,CAAC,kBAAkB;YAAE,QAAQ;QAAI;IAC5D;AACJ;AAEO,eAAe,MAAM,GAAY;IACpC,IAAI;QACA,MAAM,UAAU,MAAM,IAAA,mKAAgB,EAAC,yKAAW;QAClD,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,EACF,IAAI,EACJ,KAAK,EACL,GAAG,EACH,QAAQ,EACR,MAAM,EACN,WAAW,EACX,OAAO,EACP,OAAO,EACP,QAAQ,EACR,QAAQ,EACR,OAAO,EACV,GAAG;QAEJ,IAAI,CAAC,SAAS,MAAM,OAAO;YACvB,OAAO,IAAI,gJAAY,CAAC,gBAAgB;gBAAE,QAAQ;YAAI;QAC1D;QAEA,MAAM,cAAc,MAAM,gIAAM,CAAC,IAAI,CAAC,MAAM,CAAC;YACzC,OAAO;gBAAE,OAAO,QAAQ,IAAI,CAAC,KAAK;YAAC;YACnC,MAAM;gBACF;gBACA;gBACA;gBACA;gBACA;gBACA,aAAa,cAAc,IAAI,KAAK,eAAe;gBACnD;gBACA;gBACA;gBACA;gBACA;YACJ;QACJ;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC7B,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,oBAAoB;QAClC,OAAO,IAAI,gJAAY,CAAC,kBAAkB;YAAE,QAAQ;QAAI;IAC5D;AACJ","debugId":null}}]
}