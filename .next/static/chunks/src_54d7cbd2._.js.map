{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/sanjay/Documents/Working/Coding/Skillbest%20LMS/src/lib/api.ts"],"sourcesContent":["import axios from 'axios';\nimport { getSession } from 'next-auth/react';\n\n// Create an Axios instance\nconst api = axios.create({\n    baseURL: process.env.NEXT_PUBLIC_BACKEND_URL || '/api/backend',\n    headers: {\n        'Content-Type': 'application/json',\n    },\n});\n\n// Add a request interceptor to add the user's email\napi.interceptors.request.use(\n    async (config) => {\n        const session = await getSession();\n        if (session?.user?.email) {\n            config.headers['x-user-email'] = session.user.email;\n        }\n        return config;\n    },\n    (error) => {\n        return Promise.reject(error);\n    }\n);\n\n// Add a response interceptor\napi.interceptors.response.use(\n    (response) => response,\n    (error) => {\n        return Promise.reject(error);\n    }\n);\n\nexport default api;\n"],"names":[],"mappings":";;;;AAKa;AALb;AACA;;;AAEA,2BAA2B;AAC3B,MAAM,MAAM,mJAAK,CAAC,MAAM,CAAC;IACrB,SAAS,oDAAuC;IAChD,SAAS;QACL,gBAAgB;IACpB;AACJ;AAEA,oDAAoD;AACpD,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CACxB,OAAO;QAEC;IADJ,MAAM,UAAU,MAAM,IAAA,+JAAU;IAChC,IAAI,oBAAA,+BAAA,gBAAA,QAAS,IAAI,cAAb,oCAAA,cAAe,KAAK,EAAE;QACtB,OAAO,OAAO,CAAC,eAAe,GAAG,QAAQ,IAAI,CAAC,KAAK;IACvD;IACA,OAAO;AACX,GACA,CAAC;IACG,OAAO,QAAQ,MAAM,CAAC;AAC1B;AAGJ,6BAA6B;AAC7B,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CACzB,CAAC,WAAa,UACd,CAAC;IACG,OAAO,QAAQ,MAAM,CAAC;AAC1B;uCAGW","debugId":null}},
    {"offset": {"line": 43, "column": 0}, "map": {"version":3,"sources":["file:///home/sanjay/Documents/Working/Coding/Skillbest%20LMS/src/app/admin/courses/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { useRouter, useParams } from \"next/navigation\";\nimport api from \"@/lib/api\";\nimport Link from \"next/link\";\nimport ImageWithBasePath from \"@/core/common/imageWithBasePath\";\n\nconst AdminCourseEditPage = () => {\n    const params = useParams();\n    const router = useRouter();\n    const courseId = params.id as string;\n\n    const [course, setCourse] = useState<any>(null);\n    const [loading, setLoading] = useState(true);\n    const [saving, setSaving] = useState(false);\n    const [activeTab, setActiveTab] = useState(\"Basic Info\");\n\n    // Form States\n    const [title, setTitle] = useState(\"\");\n    const [description, setDescription] = useState(\"\");\n    const [price, setPrice] = useState(\"\");\n    const [imageUrl, setImageUrl] = useState(\"\");\n\n    // Curriculum States\n    const [chapters, setChapters] = useState<any[]>([]);\n    const [newChapterTitle, setNewChapterTitle] = useState(\"\");\n\n    useEffect(() => {\n        const fetchCourse = async () => {\n            try {\n                const { data } = await api.get(`/courses/${courseId}`);\n                setCourse(data);\n                setTitle(data.title);\n                setDescription(data.description || \"\");\n                setPrice(data.price || \"\");\n                setImageUrl(data.imageUrl || \"\");\n                setChapters(data.chapters || []);\n            } catch (error) {\n                console.error(\"Failed to fetch course\", error);\n            } finally {\n                setLoading(false);\n            }\n        };\n        if (courseId) fetchCourse();\n    }, [courseId]);\n\n    const handleImageUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\n        if (e.target.files && e.target.files[0]) {\n            const file = e.target.files[0];\n            const formData = new FormData();\n            formData.append(\"file\", file);\n\n            try {\n                const { data } = await api.post(\"/upload\", formData, {\n                    headers: { \"Content-Type\": \"multipart/form-data\" },\n                });\n                setImageUrl(data.url);\n                await api.patch(`/courses/${courseId}`, { imageUrl: data.url });\n            } catch (error) {\n                console.error(\"Upload failed\", error);\n                alert(\"Image upload failed\");\n            }\n        }\n    };\n\n    const handleSaveBasic = async () => {\n        setSaving(true);\n        try {\n            await api.patch(`/courses/${courseId}`, {\n                title,\n                description,\n                price: parseFloat(price) || 0,\n                imageUrl\n            });\n            alert(\"Saved successfully!\");\n        } catch (error) {\n            console.error(\"Save failed\", error);\n            alert(\"Failed to save\");\n        } finally {\n            setSaving(false);\n        }\n    };\n\n    const handleAddChapter = async () => {\n        if (!newChapterTitle) return;\n        try {\n            const { data } = await api.post(`/courses/${courseId}/chapters`, {\n                title: newChapterTitle\n            });\n            setChapters([...chapters, data]);\n            setNewChapterTitle(\"\");\n        } catch (error) {\n            console.error(\"Failed to add chapter\", error);\n        }\n    };\n\n    const togglePublish = async () => {\n        try {\n            const newStatus = !course.isPublished;\n            const { data } = await api.patch(`/courses/${courseId}`, { isPublished: newStatus });\n            setCourse(data);\n            alert(newStatus ? \"Course published!\" : \"Course unpublished!\");\n        } catch (error) {\n            console.error(\"Publish toggle failed\", error);\n        }\n    };\n\n    if (loading) return <div className=\"p-10 text-center\">Loading Course Details...</div>;\n    if (!course) return <div className=\"p-10 text-center text-danger\">Course not found</div>;\n\n    return (\n        <>\n            <div className=\"page-title d-flex align-items-center justify-content-between mb-4\">\n                <div className=\"d-flex align-items-center\">\n                    <Link href=\"/admin/courses\" className=\"me-3 btn btn-outline-secondary btn-sm\">\n                        <i className=\"isax isax-arrow-left-1\" />\n                    </Link>\n                    <h5 className=\"fw-bold mb-0\">{title || \"Edit Course\"}</h5>\n                </div>\n                <div className=\"d-flex align-items-center gap-2\">\n                    <span className={`badge ${course.isPublished ? \"bg-success\" : \"bg-warning\"} me-2`}>\n                        {course.isPublished ? \"Published\" : \"Draft\"}\n                    </span>\n                    <button onClick={togglePublish} className=\"btn btn-outline-primary btn-sm\">\n                        {course.isPublished ? \"Unpublish\" : \"Publish\"}\n                    </button>\n                    <button onClick={handleSaveBasic} disabled={saving} className=\"btn btn-primary btn-sm\">\n                        {saving ? \"Saving...\" : \"Save Changes\"}\n                    </button>\n                </div>\n            </div>\n\n            <div className=\"card shadow-sm mb-4\">\n                <div className=\"card-header bg-white\">\n                    <ul className=\"nav nav-tabs card-header-tabs border-0\">\n                        <li className=\"nav-item\">\n                            <button\n                                className={`nav-link border-0 ${activeTab === \"Basic Info\" ? \"active fw-bold text-primary\" : \"text-muted\"}`}\n                                onClick={() => setActiveTab(\"Basic Info\")}\n                            >\n                                Basic Info\n                            </button>\n                        </li>\n                        <li className=\"nav-item\">\n                            <button\n                                className={`nav-link border-0 ${activeTab === \"Curriculum\" ? \"active fw-bold text-primary\" : \"text-muted\"}`}\n                                onClick={() => setActiveTab(\"Curriculum\")}\n                            >\n                                Curriculum\n                            </button>\n                        </li>\n                    </ul>\n                </div>\n                <div className=\"card-body\">\n                    {activeTab === \"Basic Info\" ? (\n                        <div className=\"row g-4\">\n                            <div className=\"col-md-7\">\n                                <div className=\"form-group mb-3\">\n                                    <label className=\"form-label fw-medium\">Course Title</label>\n                                    <input\n                                        type=\"text\"\n                                        className=\"form-control\"\n                                        value={title}\n                                        onChange={(e) => setTitle(e.target.value)}\n                                    />\n                                </div>\n                                <div className=\"form-group mb-3\">\n                                    <label className=\"form-label fw-medium\">Description</label>\n                                    <textarea\n                                        className=\"form-control\"\n                                        rows={5}\n                                        value={description}\n                                        onChange={(e) => setDescription(e.target.value)}\n                                    />\n                                </div>\n                                <div className=\"form-group mb-3\">\n                                    <label className=\"form-label fw-medium\">Price ($)</label>\n                                    <input\n                                        type=\"number\"\n                                        className=\"form-control\"\n                                        value={price}\n                                        onChange={(e) => setPrice(e.target.value)}\n                                    />\n                                </div>\n                            </div>\n                            <div className=\"col-md-5\">\n                                <label className=\"form-label fw-medium\">Course Thumbnail</label>\n                                <div className=\"border border-2 border-dashed rounded-3 p-4 bg-light text-center position-relative overflow-hidden aspect-video d-flex align-items-center justify-content-center\">\n                                    {imageUrl ? (\n                                        <img src={imageUrl} alt=\"Thumbnail\" className=\"img-fluid rounded position-absolute w-100 h-100 object-fit-cover\" />\n                                    ) : (\n                                        <div className=\"text-muted\">\n                                            <i className=\"isax isax-image5 fs-48 d-block mb-2\" />\n                                            <span>No thumbnail uploaded</span>\n                                        </div>\n                                    )}\n                                    <input\n                                        type=\"file\"\n                                        className=\"position-absolute w-100 h-100 opacity-0 cursor-pointer\"\n                                        onChange={handleImageUpload}\n                                        accept=\"image/*\"\n                                    />\n                                </div>\n                                <p className=\"text-secondary sm-text mt-2 text-center\">Click or drag image to upload (16:9 recommended)</p>\n                            </div>\n                        </div>\n                    ) : (\n                        <div className=\"max-w-3xl\">\n                            <div className=\"input-group mb-4\">\n                                <input\n                                    type=\"text\"\n                                    className=\"form-control\"\n                                    placeholder=\"Add a new chapter...\"\n                                    value={newChapterTitle}\n                                    onChange={(e) => setNewChapterTitle(e.target.value)}\n                                />\n                                <button onClick={handleAddChapter} className=\"btn btn-primary\">\n                                    <i className=\"isax isax-add-circle me-1\" /> Add Chapter\n                                </button>\n                            </div>\n\n                            <div className=\"chapters-list\">\n                                {chapters.map((chapter) => (\n                                    <div key={chapter.id} className=\"card border mb-3\">\n                                        <div className=\"card-body p-3 d-flex align-items-center justify-content-between\">\n                                            <div className=\"d-flex align-items-center\">\n                                                <div className=\"bg-light p-2 rounded me-3 text-primary\">\n                                                    <i className=\"isax isax-element-35\" />\n                                                </div>\n                                                <div>\n                                                    <h6 className=\"mb-0 fw-bold\">{chapter.title}</h6>\n                                                    <span className=\"text-muted sm-text\">{chapter.lessons?.length || 0} Lessons</span>\n                                                </div>\n                                            </div>\n                                            <div className=\"d-flex gap-2\">\n                                                <button className=\"btn btn-icon btn-sm btn-light\">\n                                                    <i className=\"isax isax-edit-2\" />\n                                                </button>\n                                                <button className=\"btn btn-icon btn-sm btn-light text-danger\">\n                                                    <i className=\"isax isax-trash\" />\n                                                </button>\n                                            </div>\n                                        </div>\n                                    </div>\n                                ))}\n                                {chapters.length === 0 && (\n                                    <div className=\"text-center py-5 bg-light rounded border border-dashed\">\n                                        <p className=\"text-muted mb-0 italic\">No chapters created yet. Start by adding one above.</p>\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </>\n    );\n};\n\nexport default AdminCourseEditPage;\n"],"names":[],"mappings":"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","debugId":null}}]
}