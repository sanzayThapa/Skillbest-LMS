{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/sanjay/Documents/Working/Coding/Skillbest%20LMS/src/lib/api.ts"],"sourcesContent":["import axios from 'axios';\nimport { getSession } from 'next-auth/react';\n\n// Create an Axios instance\nconst api = axios.create({\n    baseURL: process.env.NEXT_PUBLIC_BACKEND_URL || '/api/backend',\n    headers: {\n        'Content-Type': 'application/json',\n    },\n});\n\n// Add a request interceptor to add the user's email\napi.interceptors.request.use(\n    async (config) => {\n        const session = await getSession();\n        if (session?.user?.email) {\n            config.headers['x-user-email'] = session.user.email;\n        }\n        return config;\n    },\n    (error) => {\n        return Promise.reject(error);\n    }\n);\n\n// Add a response interceptor\napi.interceptors.response.use(\n    (response) => response,\n    (error) => {\n        return Promise.reject(error);\n    }\n);\n\nexport default api;\n"],"names":[],"mappings":";;;;AAKa;AALb;AACA;;;AAEA,2BAA2B;AAC3B,MAAM,MAAM,mJAAK,CAAC,MAAM,CAAC;IACrB,SAAS,oDAAuC;IAChD,SAAS;QACL,gBAAgB;IACpB;AACJ;AAEA,oDAAoD;AACpD,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CACxB,OAAO;QAEC;IADJ,MAAM,UAAU,MAAM,IAAA,+JAAU;IAChC,IAAI,oBAAA,+BAAA,gBAAA,QAAS,IAAI,cAAb,oCAAA,cAAe,KAAK,EAAE;QACtB,OAAO,OAAO,CAAC,eAAe,GAAG,QAAQ,IAAI,CAAC,KAAK;IACvD;IACA,OAAO;AACX,GACA,CAAC;IACG,OAAO,QAAQ,MAAM,CAAC;AAC1B;AAGJ,6BAA6B;AAC7B,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CACzB,CAAC,WAAa,UACd,CAAC;IACG,OAAO,QAAQ,MAAM,CAAC;AAC1B;uCAGW","debugId":null}},
    {"offset": {"line": 43, "column": 0}, "map": {"version":3,"sources":["file:///home/sanjay/Documents/Working/Coding/Skillbest%20LMS/src/app/admin/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from 'react';\nimport api from '@/lib/api';\nimport ImageWithBasePath from '@/core/common/imageWithBasePath';\nimport Link from 'next/link';\nimport { FiTrendingUp, FiAlertCircle, FiClock, FiCheckCircle } from 'react-icons/fi';\n\ninterface DashboardStats {\n    stats: {\n        totalCompanies: number;\n        activeCompanies: number;\n        totalEmployees: number;\n        activeEmployees: number;\n        totalEnrollments: number;\n        completedEnrollments: number;\n        overdueEnrollments: number;\n        totalPrograms: number;\n        totalCourses: number;\n        complianceRate: number;\n    };\n    recentActivities: any[];\n    companiesWithLowCompliance: any[];\n}\n\nexport default function AdminDashboard() {\n    const [loading, setLoading] = useState(true);\n    const [stats, setStats] = useState<DashboardStats | null>(null);\n    const [alerts, setAlerts] = useState<any[]>([]);\n\n    useEffect(() => {\n        fetchDashboardData();\n        fetchAlerts();\n    }, []);\n\n    const fetchDashboardData = async () => {\n        try {\n            const res = await api.get('/dashboard/overview');\n            setStats(res.data);\n        } catch (error) {\n            console.error('Failed to fetch dashboard data', error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const fetchAlerts = async () => {\n        try {\n            const res = await api.get('/dashboard/alerts');\n            setAlerts(res.data);\n        } catch (error) {\n            console.error('Failed to fetch alerts', error);\n        }\n    };\n\n    if (loading) return <div className=\"text-center py-10\">Loading Dashboard...</div>;\n    if (!stats) return <div className=\"text-center py-10 text-red-500\">Error loading data</div>;\n\n    const statCards = [\n        {\n            title: 'Total Companies',\n            value: stats.stats.totalCompanies,\n            subtitle: `${stats.stats.activeCompanies} active`,\n            icon: '/assets/img/icon/building.svg', // Assuming this exists or using a fallback\n            color: 'bg-primary-transparent'\n        },\n        {\n            title: 'Active Learners',\n            value: stats.stats.activeEmployees,\n            subtitle: `of ${stats.stats.totalEmployees} total`,\n            icon: '/assets/img/icon/user-octagon.svg',\n            color: 'bg-secondary-transparent'\n        },\n        {\n            title: 'Ongoing Programs',\n            value: stats.stats.totalPrograms,\n            subtitle: `${stats.stats.totalCourses} courses`,\n            icon: '/assets/img/icon/book.svg',\n            color: 'bg-success-transparent'\n        },\n        {\n            title: 'Enrollments',\n            value: stats.stats.totalEnrollments,\n            subtitle: `${stats.stats.overdueEnrollments} overdue`,\n            icon: '/assets/img/icon/graduation.svg',\n            color: 'bg-info-transparent'\n        },\n        {\n            title: 'Compliance Rate',\n            value: `${stats.stats.complianceRate}%`,\n            subtitle: 'Target: 95%',\n            icon: '/assets/img/icon/award.svg',\n            color: 'bg-purple-transparent'\n        }\n    ];\n\n    return (\n        <div className=\"row\">\n            {/* Stat Cards */}\n            {statCards.map((card, index) => (\n                <div key={index} className=\"col-md-6 col-xl-4\">\n                    <div className=\"card\">\n                        <div className=\"card-body\">\n                            <div className=\"d-flex align-items-center\">\n                                <span className={`icon-box ${card.color} me-2 me-xxl-3 flex-shrink-0`}>\n                                    <ImageWithBasePath src={card.icon} alt={card.title} />\n                                </span>\n                                <div>\n                                    <span className=\"d-block text-muted sm-text\">{card.title}</span>\n                                    <h4 className=\"fs-24 mt-1 fw-bold\">{card.value}</h4>\n                                    <span className=\"text-xs text-secondary d-flex align-items-center mt-1\">\n                                        <FiTrendingUp className=\"me-1\" /> {card.subtitle}\n                                    </span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            ))}\n\n            {/* Main Content Area */}\n            <div className=\"col-md-12\">\n                {/* System Alerts */}\n                {alerts.length > 0 && (\n                    <div className=\"card\">\n                        <div className=\"card-body\">\n                            <div className=\"d-flex align-items-center justify-content-between border-bottom pb-4 mb-4\">\n                                <h5 className=\"fw-bold mb-0\">System Alerts</h5>\n                            </div>\n                            <div className=\"space-y-4\">\n                                {alerts.map((alert, index) => (\n                                    <div key={index} className={`d-flex items-start p-3 rounded-lg ${alert.type === 'CRITICAL' ? 'bg-danger-transparent' : 'bg-warning-transparent'}`}>\n                                        <FiAlertCircle className={`mt-1 flex-shrink-0 ${alert.type === 'CRITICAL' ? 'text-danger' : 'text-warning'}`} />\n                                        <div className=\"ml-3\">\n                                            <p className=\"text-sm font-medium\">{alert.message}</p>\n                                        </div>\n                                    </div>\n                                ))}\n                            </div>\n                        </div>\n                    </div>\n                )}\n\n                <div className=\"row\">\n                    <div className=\"col-lg-8\">\n                        {/* Recent Activities */}\n                        <div className=\"card\">\n                            <div className=\"card-body\">\n                                <div className=\"d-flex align-items-center justify-content-between border-bottom pb-4 mb-4\">\n                                    <h5 className=\"fw-bold mb-0\">Recent Activities</h5>\n                                </div>\n                                <div className=\"table-responsive custom-table\">\n                                    <table className=\"table mb-0\">\n                                        <thead>\n                                            <tr>\n                                                <th>Learner</th>\n                                                <th>Course / Program</th>\n                                                <th>Company</th>\n                                                <th>Status</th>\n                                            </tr>\n                                        </thead>\n                                        <tbody>\n                                            {stats.recentActivities.map((activity, index) => (\n                                                <tr key={index}>\n                                                    <td>\n                                                        <div className=\"d-flex align-items-center\">\n                                                            <div className=\"avatar avatar-sm me-2 rounded-circle bg-gray-100 flex-shrink-0\">\n                                                                {activity.employee.firstName[0]}\n                                                            </div>\n                                                            <span className=\"text-sm fw-medium\">{activity.employee.firstName} {activity.employee.lastName}</span>\n                                                        </div>\n                                                    </td>\n                                                    <td className=\"text-sm\">\n                                                        {activity.course?.title || activity.program?.name}\n                                                    </td>\n                                                    <td className=\"text-sm text-muted\">\n                                                        {activity.employee.company.name}\n                                                    </td>\n                                                    <td>\n                                                        <span className={`badge ${activity.status === 'COMPLETED' ? 'bg-success-transparent text-success' : 'bg-info-transparent text-info'}`}>\n                                                            {activity.status.replace('_', ' ')}\n                                                        </span>\n                                                    </td>\n                                                </tr>\n                                            ))}\n                                        </tbody>\n                                    </table>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className=\"col-lg-4\">\n                        {/* Low Compliance Companies */}\n                        <div className=\"card\">\n                            <div className=\"card-body\">\n                                <div className=\"d-flex align-items-center justify-content-between border-bottom pb-4 mb-4\">\n                                    <h5 className=\"fw-bold mb-0\">Low Compliance Entities</h5>\n                                </div>\n                                <div className=\"space-y-4\">\n                                    {stats.companiesWithLowCompliance.map((company) => (\n                                        <div key={company.id} className=\"d-flex align-items-center justify-content-between\">\n                                            <div>\n                                                <p className=\"text-sm fw-medium mb-0\">{company.name}</p>\n                                                <p className=\"text-xs text-muted mb-0\">{company._count.employees} employees</p>\n                                            </div>\n                                            <div className=\"text-end\">\n                                                <span className=\"text-danger fw-bold\">78%</span>\n                                                <div className=\"progress progress-xs mt-1\" style={{ width: '60px' }}>\n                                                    <div className=\"progress-bar bg-danger\" style={{ width: '78%' }}></div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    ))}\n                                </div>\n                                <hr />\n                                <Link href=\"/admin/compliance\" className=\"btn btn-outline-primary btn-sm w-100\">\n                                    View Detailed Report\n                                </Link>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}