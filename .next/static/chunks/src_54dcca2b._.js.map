{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/sanjay/Documents/Working/Coding/Skillbest%20LMS/src/lib/api.ts"],"sourcesContent":["import axios from 'axios';\nimport { getSession } from 'next-auth/react';\n\n// Create an Axios instance\nconst api = axios.create({\n    baseURL: process.env.NEXT_PUBLIC_BACKEND_URL || '/api/backend',\n    headers: {\n        'Content-Type': 'application/json',\n    },\n});\n\n// Add a request interceptor to add the user's email\napi.interceptors.request.use(\n    async (config) => {\n        const session = await getSession();\n        if (session?.user?.email) {\n            config.headers['x-user-email'] = session.user.email;\n        }\n        return config;\n    },\n    (error) => {\n        return Promise.reject(error);\n    }\n);\n\n// Add a response interceptor\napi.interceptors.response.use(\n    (response) => response,\n    (error) => {\n        return Promise.reject(error);\n    }\n);\n\nexport default api;\n"],"names":[],"mappings":";;;;AAKa;AALb;AACA;;;AAEA,2BAA2B;AAC3B,MAAM,MAAM,mJAAK,CAAC,MAAM,CAAC;IACrB,SAAS,oDAAuC;IAChD,SAAS;QACL,gBAAgB;IACpB;AACJ;AAEA,oDAAoD;AACpD,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CACxB,OAAO;QAEC;IADJ,MAAM,UAAU,MAAM,IAAA,+JAAU;IAChC,IAAI,oBAAA,+BAAA,gBAAA,QAAS,IAAI,cAAb,oCAAA,cAAe,KAAK,EAAE;QACtB,OAAO,OAAO,CAAC,eAAe,GAAG,QAAQ,IAAI,CAAC,KAAK;IACvD;IACA,OAAO;AACX,GACA,CAAC;IACG,OAAO,QAAQ,MAAM,CAAC;AAC1B;AAGJ,6BAA6B;AAC7B,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CACzB,CAAC,WAAa,UACd,CAAC;IACG,OAAO,QAAQ,MAAM,CAAC;AAC1B;uCAGW","debugId":null}},
    {"offset": {"line": 43, "column": 0}, "map": {"version":3,"sources":["file:///home/sanjay/Documents/Working/Coding/Skillbest%20LMS/src/app/admin/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from 'react';\nimport api from '@/lib/api';\nimport {\n    FiUsers, FiBook, FiAlertCircle,\n    FiCheckCircle, FiClock, FiTrendingUp\n} from 'react-icons/fi';\nimport { HiOfficeBuilding } from 'react-icons/hi';\n\ninterface DashboardStats {\n    stats: {\n        totalCompanies: number;\n        activeCompanies: number;\n        totalEmployees: number;\n        activeEmployees: number;\n        totalEnrollments: number;\n        completedEnrollments: number;\n        overdueEnrollments: number;\n        totalPrograms: number;\n        totalCourses: number;\n        complianceRate: number;\n    };\n    recentActivities: any[];\n    companiesWithLowCompliance: any[];\n}\n\nexport default function AdminDashboard() {\n    const [loading, setLoading] = useState(true);\n    const [stats, setStats] = useState<DashboardStats | null>(null);\n    const [alerts, setAlerts] = useState<any[]>([]);\n\n    useEffect(() => {\n        fetchDashboardData();\n        fetchAlerts();\n    }, []);\n\n    const fetchDashboardData = async () => {\n        try {\n            const res = await api.get('/dashboard/overview');\n            setStats(res.data);\n        } catch (error) {\n            console.error('Failed to fetch dashboard data', error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const fetchAlerts = async () => {\n        try {\n            const res = await api.get('/dashboard/alerts');\n            setAlerts(res.data);\n        } catch (error) {\n            console.error('Failed to fetch alerts', error);\n        }\n    };\n\n    if (loading) {\n        return (\n            <div className=\"flex items-center justify-center h-64\">\n                <div className=\"text-lg\">Loading dashboard...</div>\n            </div>\n        );\n    }\n\n    if (!stats) {\n        return (\n            <div className=\"text-center text-red-600\">\n                Failed to load dashboard data\n            </div>\n        );\n    }\n\n    const statCards = [\n        {\n            title: 'Total Companies',\n            value: stats.stats.totalCompanies,\n            subtitle: `${stats.stats.activeCompanies} active`,\n            icon: HiOfficeBuilding,\n            color: 'bg-blue-500'\n        },\n        {\n            title: 'Active Learners',\n            value: stats.stats.activeEmployees,\n            subtitle: `of ${stats.stats.totalEmployees} total`,\n            icon: FiUsers,\n            color: 'bg-green-500'\n        },\n        {\n            title: 'Ongoing Trainings',\n            value: stats.stats.totalEnrollments - stats.stats.completedEnrollments,\n            subtitle: `${stats.stats.totalEnrollments} total`,\n            icon: FiBook,\n            color: 'bg-purple-500'\n        },\n        {\n            title: 'Compliance Rate',\n            value: `${stats.stats.complianceRate}%`,\n            subtitle: `${stats.stats.completedEnrollments} completed`,\n            icon: FiCheckCircle,\n            color: 'bg-teal-500'\n        },\n        {\n            title: 'Overdue Trainings',\n            value: stats.stats.overdueEnrollments,\n            subtitle: 'Requires attention',\n            icon: FiAlertCircle,\n            color: 'bg-red-500'\n        },\n        {\n            title: 'Training Programs',\n            value: stats.stats.totalPrograms,\n            subtitle: `${stats.stats.totalCourses} courses`,\n            icon: FiTrendingUp,\n            color: 'bg-indigo-500'\n        }\n    ];\n\n    return (\n        <div className=\"space-y-6\">\n            {/* Page Title */}\n            <div>\n                <h1 className=\"text-3xl font-bold text-gray-900\">Admin Dashboard</h1>\n                <p className=\"text-gray-600 mt-1\">Your daily cockpit for managing the LMS</p>\n            </div>\n\n            {/* System Alerts */}\n            {alerts.length > 0 && (\n                <div className=\"bg-white rounded-lg shadow p-6\">\n                    <h2 className=\"text-lg font-semibold mb-4 flex items-center\">\n                        <FiAlertCircle className=\"mr-2 text-orange-500\" />\n                        System Alerts\n                    </h2>\n                    <div className=\"space-y-3\">\n                        {alerts.map((alert, index) => (\n                            <div\n                                key={index}\n                                className={`p-4 rounded-lg border-l-4 ${alert.type === 'CRITICAL'\n                                    ? 'bg-red-50 border-red-500'\n                                    : alert.type === 'WARNING'\n                                        ? 'bg-yellow-50 border-yellow-500'\n                                        : 'bg-blue-50 border-blue-500'\n                                    }`}\n                            >\n                                <p className=\"text-sm font-medium\">{alert.message}</p>\n                            </div>\n                        ))}\n                    </div>\n                </div>\n            )}\n\n            {/* Stats Grid */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {statCards.map((card, index) => {\n                    const Icon = card.icon;\n                    return (\n                        <div key={index} className=\"bg-white rounded-lg shadow p-6\">\n                            <div className=\"flex items-center justify-between\">\n                                <div>\n                                    <p className=\"text-sm text-gray-600 mb-1\">{card.title}</p>\n                                    <p className=\"text-3xl font-bold text-gray-900\">{card.value}</p>\n                                    <p className=\"text-xs text-gray-500 mt-1\">{card.subtitle}</p>\n                                </div>\n                                <div className={`${card.color} p-3 rounded-lg`}>\n                                    <Icon size={24} className=\"text-white\" />\n                                </div>\n                            </div>\n                        </div>\n                    );\n                })}\n            </div>\n\n            {/* Recent Activities */}\n            <div className=\"bg-white rounded-lg shadow\">\n                <div className=\"p-6 border-b border-gray-200\">\n                    <h2 className=\"text-lg font-semibold\">Recent Activities</h2>\n                </div>\n                <div className=\"p-6\">\n                    {stats.recentActivities.length > 0 ? (\n                        <div className=\"space-y-4\">\n                            {stats.recentActivities.map((activity, index) => (\n                                <div key={index} className=\"flex items-start space-x-3 pb-4 border-b border-gray-100 last:border-0\">\n                                    <div className=\"flex-shrink-0\">\n                                        <FiClock className=\"text-gray-400\" size={20} />\n                                    </div>\n                                    <div className=\"flex-1\">\n                                        <p className=\"text-sm text-gray-900\">\n                                            <span className=\"font-medium\">\n                                                {activity.employee.firstName} {activity.employee.lastName}\n                                            </span>\n                                            {' '}enrolled in{' '}\n                                            <span className=\"font-medium\">\n                                                {activity.course?.title || activity.program?.name}\n                                            </span>\n                                        </p>\n                                        <p className=\"text-xs text-gray-500 mt-1\">\n                                            {activity.employee.company.name} â€¢ {new Date(activity.createdAt).toLocaleDateString()}\n                                        </p>\n                                    </div>\n                                    <div>\n                                        <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${activity.status === 'COMPLETED'\n                                            ? 'bg-green-100 text-green-800'\n                                            : activity.status === 'IN_PROGRESS'\n                                                ? 'bg-blue-100 text-blue-800'\n                                                : 'bg-gray-100 text-gray-800'\n                                            }`}>\n                                            {activity.status.replace('_', ' ')}\n                                        </span>\n                                    </div>\n                                </div>\n                            ))}\n                        </div>\n                    ) : (\n                        <p className=\"text-gray-500 text-center py-8\">No recent activities</p>\n                    )}\n                </div>\n            </div>\n\n            {/* Companies Overview */}\n            <div className=\"bg-white rounded-lg shadow\">\n                <div className=\"p-6 border-b border-gray-200\">\n                    <h2 className=\"text-lg font-semibold\">Companies Overview</h2>\n                </div>\n                <div className=\"p-6\">\n                    {stats.companiesWithLowCompliance.length > 0 ? (\n                        <div className=\"overflow-x-auto\">\n                            <table className=\"min-w-full divide-y divide-gray-200\">\n                                <thead>\n                                    <tr>\n                                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                                            Company\n                                        </th>\n                                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                                            Employees\n                                        </th>\n                                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                                            Status\n                                        </th>\n                                    </tr>\n                                </thead>\n                                <tbody className=\"bg-white divide-y divide-gray-200\">\n                                    {stats.companiesWithLowCompliance.map((company) => (\n                                        <tr key={company.id}>\n                                            <td className=\"px-6 py-4 whitespace-nowrap\">\n                                                <div className=\"text-sm font-medium text-gray-900\">{company.name}</div>\n                                                <div className=\"text-sm text-gray-500\">{company.industry || 'N/A'}</div>\n                                            </td>\n                                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                                                {company._count.employees}\n                                            </td>\n                                            <td className=\"px-6 py-4 whitespace-nowrap\">\n                                                <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${company.status === 'ACTIVE'\n                                                    ? 'bg-green-100 text-green-800'\n                                                    : company.status === 'PAUSED'\n                                                        ? 'bg-yellow-100 text-yellow-800'\n                                                        : 'bg-gray-100 text-gray-800'\n                                                    }`}>\n                                                    {company.status}\n                                                </span>\n                                            </td>\n                                        </tr>\n                                    ))}\n                                </tbody>\n                            </table>\n                        </div>\n                    ) : (\n                        <p className=\"text-gray-500 text-center py-8\">No companies found</p>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}